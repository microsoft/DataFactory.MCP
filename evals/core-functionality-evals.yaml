# Core DataFactory MCP Server Evaluations
# Focused tests for essential functionality

model:
  provider: openai
  name: gpt-4o

evals:
  # Core Authentication Tests
  - name: auth_interactive_flow
    description: Test interactive authentication initiation
    prompt: "Authenticate with Azure AD using interactive login"
    expected_result: "Should start interactive auth flow and return success message or redirect URL"

  - name: auth_service_principal_flow
    description: Test service principal authentication
    prompt: "Authenticate with service principal using application ID 'app123' and client secret 'secret456'"
    expected_result: "Should authenticate successfully and return authentication confirmation"

  - name: auth_status_retrieval
    description: Test getting current authentication status
    prompt: "What is my current authentication status?"
    expected_result: "Should return authentication state, user info, and token validity"

  # Core Workspace Operations
  - name: workspace_listing
    description: Test basic workspace listing
    prompt: "Show me all workspaces I have access to"
    expected_result: "Should return list of workspaces with names, IDs, and access levels"

  - name: workspace_role_filtering
    description: Test workspace filtering by roles
    prompt: "List workspaces where I have Admin or Contributor roles"
    expected_result: "Should filter and return only workspaces matching specified roles"

  # Core Connection Management
  - name: connection_discovery
    description: Test connection listing and discovery
    prompt: "List all my available connections"
    expected_result: "Should return connections with types, names, and connection details"

  - name: connection_detail_retrieval
    description: Test getting specific connection information
    prompt: "Get details for connection with ID 'conn-123'"
    expected_result: "Should return comprehensive connection details including configuration"

  # Core Gateway Operations
  - name: gateway_enumeration
    description: Test gateway listing
    prompt: "Show me all available gateways"
    expected_result: "Should list gateways with types (on-premises, virtual network, personal)"

  - name: gateway_specific_lookup
    description: Test specific gateway information retrieval
    prompt: "Get information about gateway 'gateway-456'"
    expected_result: "Should return detailed gateway configuration and status"

  # Core Dataflow Operations
  - name: dataflow_workspace_listing
    description: Test dataflow listing for workspace
    prompt: "List all dataflows in workspace 'ws-789'"
    expected_result: "Should return dataflows with names, IDs, and metadata for specified workspace"

  # Error Handling
  - name: missing_workspace_id
    description: Test dataflow listing without workspace ID
    prompt: "List dataflows without specifying a workspace"
    expected_result: "Should return error indicating workspace ID is required"

  - name: invalid_connection_id
    description: Test connection lookup with invalid ID
    prompt: "Get connection details for non-existent connection 'invalid-id'"
    expected_result: "Should return appropriate error message for not found connection"

  # Authentication Required Scenarios
  - name: unauthenticated_workspace_access
    description: Test workspace access without authentication
    prompt: "List workspaces without being authenticated"
    expected_result: "Should return authentication error and prompt to authenticate first"
